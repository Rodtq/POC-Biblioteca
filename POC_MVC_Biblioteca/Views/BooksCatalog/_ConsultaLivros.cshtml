@model POC_MVC_Biblioteca.ViewModels.BooksConsultViewModel
<div id="consulta-Livros-partial">
  <h3>Consulta de livros</h3>
  @using (Html.BeginForm("GetBooks", "BooksCatalog", FormMethod.Post, new { id = "QueryBooksfrm" }))
  {
      <div id="consulta-filtros">
        <div>
          <label>Filtros:</label>
        </div>
        <label>Titulo:</label>
        @Html.TextBoxFor(model => model.TitleFilter)
        <label>Autor:</label>
        @Html.TextBoxFor(model => model.AuthorFilter)
        <label>Editora:</label>
        @Html.TextBoxFor(model => model.EditorFilter)
        @* @Html.DropDownListFor(model => model.FiltroCategoria, Model.ListaCategorias, "-- Selecione --");*@
        <input type="submit" value="consultar" />
      </div>

  }
  <div id="lista-livros">
    <table>
      <tr>
        <th><b>Titulo</b></th>
        <th><b>Autor</b></th>
        <th><b>Editora</b></th>
        <th><b>Categoria</b></th>
        <th><b>Data de publicação</b></th>
      </tr>

      @foreach (var item in Model.BooksList)
      {
          <tr>
            <td>
              <label>@item.Title</label>
            </td>
            <td>
              <label>@item.Author</label>
            </td>
            <td>
              <label>@item.Editor</label>
            </td>
            <td>
              <label>@item.Category</label>
            </td>
            <td>
              <label>@item.BookYear</label>
            </td>
          </tr>
      }

    </table>
  </div>

</div>
<script type="text/javascript">
  var form = $("#QueryBooksfrm");
  var htmlReplacementElement = $("#consulta-Livros-partial");
  form.on("submit", function (e) {
    e.preventDefault();
    $.ajax({
      type: "POST",
      url: form.attr('action'),
      data: form.serialize(), // serializes the form's elements.
      success: function (data) {
        htmlReplacementElement.html(data);
      }
    });
  });

</script>


